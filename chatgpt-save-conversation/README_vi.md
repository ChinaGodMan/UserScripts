<a id="top"></a>

<!--NAVIGATION-->
<div align="right">
    <h6>
        <picture>
            <source type="image/svg+xml" media="(prefers-color-scheme: dark)"
                srcset="https://assets.aiwebextensions.com/images/icons/earth/white/icon32.svg">
            <img height=14
                src="https://assets.aiwebextensions.com/images/icons/earth/black/icon32.svg">
        </picture>
        <a href="https://github.com/ChinaGodMan/UserScripts/blob/main/chatgpt-save-conversation/README.md">简体中文</a> |
        <a href="https://github.com/ChinaGodMan/UserScripts/blob/main/chatgpt-save-conversation/README_en.md">English</a> |
        <a href="https://github.com/ChinaGodMan/UserScripts/blob/main/chatgpt-save-conversation/README_ko.md">한국어</a> |
        <a href="https://github.com/ChinaGodMan/UserScripts/blob/main/chatgpt-save-conversation/README_vi.md">Tiếng Việt</a> |
        <a href="https://github.com/ChinaGodMan/UserScripts/blob/main/chatgpt-save-conversation/README_zh-TW.md">繁體中文</a>
    <br>
    <em><sub>👆️truy cập GitHub README FILE trên để có trải nghiệm tốt hơn。</sub></em>
    </h6>
</div>

<!--NAVIGATION-END-->
<!--SHIELDS-->
<center><div align="center"><a href="https://github.com/ChinaGodMan" target="_blank">
    <img height="96px" width="96px" src="https://avatars.githubusercontent.com/u/96548841?v=4" alt="UserScripts"></a>
<h5><a href="https://github.com/ChinaGodMan/UserScripts/tree/main/docs/vi#-Danh-s%C3%A1ch-t%E1%BA%ADp-l%E1%BB%87nh" target="_blank"><ruby>GitHubXem kịch bản của người phục vụ<rt>Github:@ChinaGodMan</rt></ruby></a><br><a href="https://greasyfork.org/zh-CN/scripts?by=1169082&sort=created" target="_blank">GreasyForkXem kịch bản của người phục vụ</a><br><a href="#:~:text=Xem tất cả các tập lệnh xuất bản">Xem tập lệnh của người phục vụ trên trang hiện tại</a></h5>
<a href="https://greasyfork.org/users/1169082-%E4%BA%BA%E6%B0%91%E7%9A%84%E5%8B%A4%E5%8A%A1%E5%91%98?per_page=200" target="_blank"><img src="https://img.shields.io/static/v1?label=%20&message=GreasyFork&logo=greasyfork&logoColor=white&labelColor=%23670000&color=%23670000&style=for-the-badge" alt="GreasyFork"></a>
<img src="https://img.shields.io/badge/dynamic/json?&label=T%E1%BB%95ng%20s%E1%BB%91%20c%C3%A0i%20%C4%91%E1%BA%B7t%20c%E1%BB%A7a%20t%E1%BA%A5t%20c%E1%BA%A3%20c%C3%A1c%20t%E1%BA%ADp%20l%E1%BB%87nh&query=$.totalInstalls&logo=greasyfork&logoColor=white&labelColor=%23670000&color=blue&style=for-the-badge&url=https://github.com/ChinaGodMan/UserScriptsHistory/raw/main/total_installs.json" alt="Total Installs">
<img src="https://img.shields.io/badge/dynamic/json?&label=S%E1%BB%91%20l%E1%BA%A7n%20m%E1%BB%99t%20k%E1%BB%8Bch%20b%E1%BA%A3n%20%C4%91%C6%B0%E1%BB%A3c%20s%E1%BB%AD%20d%E1%BB%A5ng%20m%E1%BB%97i%20ng%C3%A0y&query=$.total&logo=greasyfork&logoColor=white&labelColor=%23670000&color=186f83&style=for-the-badge&url=https://github.com/ChinaGodMan/UserScriptsHistory/raw/main/daily_update_checks.json" alt="Daily update checks">
<img src="https://img.shields.io/badge/dynamic/json?&label=S%E1%BB%91%20l%C6%B0%E1%BB%A3ng%20t%E1%BA%A5t%20c%E1%BA%A3%20c%C3%A1c%20t%E1%BA%ADp%20l%E1%BB%87nh%20%C4%91%C6%B0%E1%BB%A3c%20c%C3%A0i%20%C4%91%E1%BA%B7t%20ng%C3%A0y%20h%C3%B4m%20nay&query=$.totalDailyInstalls&logo=greasyfork&logoColor=white&labelColor=%23670000&color=blue&style=for-the-badge&url=https://github.com/ChinaGodMan/UserScriptsHistory/raw/main/total_installs.json" alt="Total Daily Installs">
<img src="https://img.shields.io/badge/dynamic/json?&label=S%E1%BB%91%20l%C6%B0%E1%BB%A3ng%20k%E1%BB%8Bch%20b%E1%BA%A3n&query=$.numScripts&logo=greasyfork&logoColor=white&labelColor=%23670000&color=blue&style=for-the-badge&url=https://github.com/ChinaGodMan/UserScriptsHistory/raw/main/total_installs.json" alt="Scripts Count"><br>
<img src="https://img.shields.io/badge/dynamic/json?&label=T%E1%BA%A5t%20c%E1%BA%A3%20c%C3%A1c%20%C4%91%C3%A1nh%20gi%C3%A1%20t%E1%BB%91t&query=$.totalGoodRatings&logo=greasyfork&logoColor=white&labelColor=%23670000&color=4CAF50&style=for-the-badge&url=https://github.com/ChinaGodMan/UserScriptsHistory/raw/main/total_installs.json" alt="Good Ratings">
<img src="https://img.shields.io/badge/dynamic/json?&label=T%E1%BA%A5t%20c%E1%BA%A3%20chung&query=$.totalOkRatings&logo=greasyfork&logoColor=white&labelColor=%23670000&color=FF9800&style=for-the-badge&url=https://github.com/ChinaGodMan/UserScriptsHistory/raw/main/total_installs.json" alt="Ok Ratings">
<img src="https://img.shields.io/badge/dynamic/json?label=T%E1%BA%A5t%20c%E1%BA%A3%20c%C3%A1c%20%C4%91%C3%A1nh%20gi%C3%A1%20ti%C3%AAu%20c%E1%BB%B1c&query=$.totalBadRatings&logo=greasyfork&logoColor=white&labelColor=%23670000&color=F44336&style=for-the-badge&url=https://github.com/ChinaGodMan/UserScriptsHistory/raw/main/total_installs.json" alt="Bad Ratings">
<a href="https://www.codefactor.io/repository/github/ChinaGodMan/UserScripts" target="_blank"><img src="https://img.shields.io/codefactor/grade/github/ChinaGodMan/UserScripts?label=Ch%E1%BA%A5t%20l%C6%B0%E1%BB%A3ng%20m%C3%A3&logo=codefactor&logoColor=white&labelColor=464646&color=b5fc7b&style=for-the-badge" alt="CodeQuality"></a>
<a href="https://github.com/ChinaGodMan/UserScripts" target="_blank"><img src="https://img.shields.io/github/stars/ChinaGodMan/UserScripts?label=STAR%20Mark&logo=github&logoColor=white&labelColor=black&color=FF69B4&style=for-the-badge" alt="Stars"></a>
<a href="https://github.com/ChinaGodMan/UserScripts" target="_blank"><img src="https://img.shields.io/github/forks/ChinaGodMan/UserScripts?label=Forks&logo=github&logoColor=white&labelColor=black&color=grey&style=for-the-badge" alt="Forks"></a>
<a href="https://github.com/ChinaGodMan/UserScripts/issues" target="_blank"><img src="https://img.shields.io/github/issues/ChinaGodMan/UserScripts?label=issues&logo=github&logoColor=white&labelColor=black&style=for-the-badge" alt="Issue"></a>
<center><div align="center"><sub>⭐<a href="https://github.com/ChinaGodMan/UserScripts" target="_blank" style="color: #556B2F; background-color: pink;">Nếu kịch bản giúp bạn,Có thể thắp sáng các vì sao để khuyến khích</a>⭐</sub></div><a href="https://t.me/qinwuyuan"><img src="https://img.shields.io/static/v1?label=%20&message=telegram&logo=telegram&logoColor=white&labelColor=%230088CC&color=%230088CC&style=for-the-badge" alt="Telegram"></a>
<a href="https://www.tiktok.com/@qinwuyuan"><img src="https://img.shields.io/static/v1?label=%20&message=tiktok&logo=tiktok&logoColor=%23EE1D52&labelColor=%23010101&color=%23EE1D52&style=for-the-badge" alt="TikTok"></a>
<a href="https://www.instagram.com/nide9448/"><img src="https://img.shields.io/static/v1?label=%20&message=instagram&logo=instagram&logoColor=white&labelColor=%23E1306C&color=%23E1306C&style=for-the-badge" alt="Instagram"></a>
<a href="mailto:china.qinwuyuan@gmail.com"><img src="https://img.shields.io/static/v1?label=%20&message=gmail&logo=gmail&logoColor=white&labelColor=%23D93025&color=%23D93025&style=for-the-badge" alt="Gmail"></a>
</center>
</div></center>
<img height=6px width="100%" src="https://media.chatgptautorefresh.com/images/separators/gradient-aqua.png?latest">
<center><div align="center">
    <strong>Sử dụng được đề xuất：</strong><br>
<img src="https://img.shields.io/badge/h%E1%BB%87%20%C4%91i%E1%BB%81u%20h%C3%A0nh-🪟%20Windows%20%7C%20🍎%20Mac%20%7C%20🐧%20Linux%20%7C%20🤖%20Android-blueviolet.svg?style=for-the-badge" alt="Support"><br>
<img src="https://img.shields.io/badge/Tr%C3%ACnh%20duy%E1%BB%87t%20%C4%91%C6%B0%E1%BB%A3c%20%C4%91%E1%BB%81%20xu%E1%BA%A5t-%20Google%20Chrome%20%7C%20%20Microsoft%20Edge%20%7C%20%20FireFox%20%7C%20%20Kiwi-blueviolet.svg?style=for-the-badge" alt="Support"><br>
<img src="https://img.shields.io/badge/Tr%C3%ACnh%20qu%E1%BA%A3n%20l%C3%BD%20t%E1%BA%ADp%20l%E1%BB%87nh-%20Violentmonkey%20%7C%20%20Tampermonkey%20%7C%20%20ScriptCat%20%7C%20%20OrangeMonkey%20%7C%20STAY-blueviolet.svg?style=for-the-badge" alt="Support"><br>
💡 <strong>Tip:</strong> Trình quản lý tập lệnh và trình duyệt được liệt kê ở trên không đại diện cho tất cả<br>
    <strong>Tập lệnh chạy bình thường trong môi trường sau</strong><br>
    <img src="https://img.shields.io/badge/dynamic/json?&label=Passed&query=$.passed&logo=googlechrome&logoColor=white&labelColor=%23007aff&color=4CAF50&style=for-the-badge&url=https://github.com/ChinaGodMan/UserScripts/raw/main/docs/passed.json" alt="Passed"><br>
    <img height=6px width="100%" src="https://media.chatgptautorefresh.com/images/separators/gradient-aqua.png?latest">
</div></center>

<!--SHIELDS-END-->
<!--HISTORY-->
<center><div align="center">
    <h1>Chatgpt Lưu trò chuyện</h1>
    <p>「 Lưu cuộc trò chuyện dưới dạng tệp .txt 」</p>
    <img src="https://views.whatilearened.today/views/github/537648/hmjz100.svg" alt="Views">
    <img src="https://img.shields.io/github/size/ChinaGodMan/UserScripts/chatgpt-save-conversation/chatgpt-save-conversation.user.js?color=%23990000">
    <img src="https://img.shields.io/badge/dynamic/json?&label=C%E1%BA%ADp%20nh%E1%BA%ADt%20ki%E1%BB%83m%20tra%20h%C3%A0ng%20ng%C3%A0y&query=$.537648&logo=greasyfork&logoColor=white&labelColor=%23670000&color=blue&url=https://github.com/ChinaGodMan/UserScriptsHistory/raw/main/daily_update_checks.json">
    <p>Download:<a href="https://github.com/ChinaGodMan/UserScripts/tree/main/chatgpt-save-conversation">Github</a> | ⭐<a
            href="https://greasyfork.org/scripts/537648">Greasy
            Fork</a></p>
    <img src="https://raw.githubusercontent.com/ChinaGodMan/UserScriptsHistory/main/stats/537648.png">
</div></center>

<!--HISTORY-END-->
<!--TEXT-->

# Giới thiệu về tập lệnh nút lưu nội dung trò chuyện

Tự động thêm một vị trí cố định“Lưu cuộc trò chuyện”Cái nút，Sau khi nhấp vào nút, nội dung hội thoại trò chuyện trong trang hiện tại sẽ được trích xuất và lưu dưới dạng tệp văn bản đơn giản.，Thuận tiện cho người dùng Lịch sử trò chuyện xuất và sao lưu。

---

## Chức năng chính

- **Trích xuất tin nhắn trò chuyện**  
  Từ tất cả được bao gồm trong trang `data-message-id` Các yếu tố của thuộc tính trích xuất nội dung hội thoại，Và theo `data-message-author-role` Vai trò phán đoán thuộc tính（User / Assistant Chờ đợi）。

- **Định dạng văn bản**  
  Theo `Tên nhân vật:` Line Break，Viết nội dung văn bản tương ứng，每条消息之间用Sự tách biệt符 `---` 分隔。

- **Tạo tên tệp**  
  Ưu tiên sử dụng tiêu đề web40Ký tự như tên tệp，Nếu không có tiêu đề, hãy bắt đầu với cuộc đối thoại5Chung nối chữ thường của các từ dưới dạng tên tệp，Tên tệp mặc định là `conversation.txt`。

- **Tải xuống tệp văn bản**  
  sử dụng Blob Liên kết tải xuống tạo đối tượng，Mô phỏng nhấp vào để tải xuống tệp văn bản nội dung hội thoại。

- **Tương tác giao diện**  
  Một nút nhỏ được hiển thị ở góc trên bên trái của trang，Bấm để lưu cuộc trò chuyện hiện tại。

---

## Mô tả cấu trúc mã

- `capitalizeRole(role)`：Định dạng chữ cái ban đầu của vai trò dựa trên chuỗi vai trò。
- `generateFileName(messages)`：Tạo tên tệp dựa trên tiêu đề trang hoặc tin nhắn đầu tiên。
- `saveConversation()`：Chức năng cốt lõi，Thu thập nội dung tin nhắn、định dạng、Tạo tệp và tải xuống kích hoạt。
- `createDownloadButton()`：Tạo và thêm một“Lưu cuộc trò chuyện”Nút đến trang。
- `waitForBody` Hẹn giờ：Chờ phần thân trang và tin nhắn trò chuyện để hoàn thành việc tải các nút。

---

## Cách sử dụng

1. Thêm tập lệnh này vào trình quản lý tập lệnh người dùng trình duyệt（giống Tampermonkey）。
2. Mở trang web với các cuộc hội thoại trò chuyện（Hỗ trợ với `data-message-id` Và `data-message-author-role` Cấu trúc của các thuộc tính）。
3. Góc trên bên trái của trang xuất hiện“Lưu cuộc trò chuyện”Cái nút，Sau khi nhấp vào, bạn có thể xuất nội dung trò chuyện hiện tại dưới dạng `.txt` tài liệu。

---

## Kịch bản áp dụng

- Lịch sử trò chuyện trên web xuất khẩu và sao lưu。
- Xem nội dung cuộc trò chuyện ngoại tuyến。
- Thuận tiện để chia sẻ hoặc lưu trữ văn bản trò chuyện。

---

## Những điều cần lưu ý

- Phụ thuộc vào cấu trúc trang，Yêu cầu nút tin nhắn để có `data-message-id` Và `data-message-author-role` tài sản。
- Chỉ trích xuất bằng `.whitespace-pre-wrap` hoặc `.markdown` Nội dung văn bản của lớp học。
- Kiểu nút đơn giản và cố định，Vị trí có thể được tùy chỉnh khi cần thiết。

---

Kịch bản này phù hợp cho người dùng cần nhanh chóng lưu lịch sử trò chuyện trên web。

<!--AUTHORS-->
## 💖 Tập lệnh được tham chiếu hoặc sử dụng tập lệnh sau:
[🧑‍💻 **@Taylor-eOS**](https://github.com/Taylor-eOS) ⇒ 📜 _[Save Conversation](https://github.com/Taylor-eOS/tampermonkey-scripts/blob/main/save_conversation.user.js)_
<!--AUTHORS-END-->
<!--SCREENSHOT-->

<!--SCREENSHOT-END-->
<!--TEXT-END-->

<!--RELATED-->
<!--RELATED-END-->
<!--HELP-->
<img height=6px width="100%" src="https://media.chatgptautorefresh.com/images/separators/gradient-aqua.png?latest">

## Giúp đỡ

Trình duyệt và trình quản lý tập lệnh được đề xuất：

-   **Greasemonkey + Waterfox**
-   **Tampermonkey/Violentmonkey + Firefox**
-   **Tampermonkey/Violentmonkey + Chrome**
-   **Userscripts + ios Safari**
-   **Violentmonkey/KiWiBrowser + Android**

**Nếu bạn cần tìm hiểu thêm về cách cài đặt tập lệnh người dùng,[Nhấp vào tôi](https://github.com/ChinaGodMan/UserScripts/blob/main/docs/help/vi#readme)Xem việc dạy hình ảnh và văn bản!**

<img height="6px" width="100%" src="https://media.chatgptautorefresh.com/images/separators/gradient-aqua.png?latest">

### [Xem tất cả các tập lệnh xuất bản](https://github.com/ChinaGodMan/UserScripts/tree/main/docs/vi#-Danh-s%C3%A1ch-t%E1%BA%ADp-l%E1%BB%87nh)

<!--HELP-END-->
<!--FOOTER-->

<img height="6px" width="100%" src="https://media.chatgptautorefresh.com/images/separators/gradient-aqua.png?latest">
<center><div align="center"><p><a href="https://github.com/ChinaGodMan/UserScripts#readme"><strong>Nhiều tập lệnh người dùng hơn</strong></a> /<a href="#top">Quay lại đầu↑</a></p></div></center>

<!--FOOTER--END-->

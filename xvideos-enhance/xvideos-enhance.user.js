// ==UserScript==
// @name               xvideos push download
// @name:ar            XVideos Push Download
// @name:bg            Xvideos Push Download
// @name:cs            XVideos Push Download
// @name:da            XVIDEOS PUSH DOWNLOAD
// @name:de            Xvideos Push -Download
// @name:el            download push xvideos
// @name:en            xvideos push download
// @name:eo            XVideos Push Elŝuti
// @name:es            descarga de push xvideos
// @name:fi            xvideos push lataus
// @name:fr            xvideos push download
// @name:fr-CA         xvideos push download
// @name:he            Xvideos Push Download
// @name:hr            xvideos push preuzimanje
// @name:hu            xvideos push letöltés
// @name:id            Xvideos mendorong unduh
// @name:it            XVIDEOS PUSH Download
// @name:ja            xvideosプッシュダウンロード
// @name:ka            xvideos push ჩამოტვირთვა
// @name:ko            xvideos 푸시 다운로드
// @name:nb            XVIDEOS PUSH Download
// @name:nl            xvideos push download
// @name:pl            XVIDEOS PUSH DOBLOWANIE
// @name:pt-BR         XVIDEOS Push Download
// @name:ro            Descărcarea XVideos Push
// @name:ru            xvideos push скачать
// @name:sk            xvideos push sťahovanie
// @name:sr            квидеос пусх довнлоад
// @name:sv            xvideos push download
// @name:th            ดาวน์โหลด xvideos push
// @name:tr            xvideos push indir
// @name:ug            xvideos ئىتتىرىش
// @name:uk            xvideos push завантажити
// @name:vi            XVIDEOS Đẩy tải xuống
// @name:zh            xvideos推送下载
// @name:zh-CN         xvideos推送下载
// @name:zh-HK         xvideos推送下載
// @name:zh-SG         xvideos推送下载
// @name:zh-TW         xvideos推送下載
// @description:ar     1. التشغيل التلقائي 2. الشاشة العريضة التلقائية 3. التشغيل عالي الجودة 4.
// @description:bg     1. Автоматично възпроизвеждане 2. Автоматичен широкоекранен 3. Висококачествено възпроизвеждане 4. Щракнете, за да натиснете следващия филм 5. Изтеглете миниатюри
// @description:cs     1. automatické přehrávání 2. Automatické širokoúhlé obrazovky 3. vysoce kvalitní přehrávání 4.
// @description:da     1. Automatisk afspilning 2. Automatisk widescreen 3.. Afspilning af høj kvalitet 4. klik for at skubbe den næste film 5. Download miniaturebilleder
// @description:de     1. Automatische Wiedergabe 2. Automatisches Breitbild 3. Hochwertiger Wiedergabe 4. Klicken Sie hier
// @description:el     1. Αυτόματη αναπαραγωγή 2. Αυτόματη ευρεία οθόνη 3. Αναπαραγωγή υψηλής ποιότητας 4. Κάντε κλικ για να πιέσετε την επόμενη ταινία 5. Λήψη μικρογραφιών
// @description:en     1. Automatic playback 2. Automatic widescreen 3. High-quality playback 4. Click to push the next movie 5. Download thumbnails
// @description:eo     1. Aŭtomata reprodukto 2. Aŭtomata larĝekrana 3. Altkvalita reprodukto 4. Alklaku por puŝi la sekvan filmon 5. Elŝuti Miniaturojn
// @description:es     1. Reproducción automática 2. Cerca ancha automática 3. Reproducción de alta calidad 4. Haga clic para presionar la próxima película 5. Descargue las miniaturas
// @description:fi     1. Automaattinen toisto 2. Automaattinen laajakuva 3. Korkealaatuinen toisto 4. Napsauta painaa seuraavaa elokuvaa 5. Lataa pikkukuvat
// @description:fr     1. Playage automatique 2. Écran large automatique 3. Playage de haute qualité 4. Cliquez pour pousser le film suivant 5. Téléchargez les miniatures
// @description:fr-CA  1. Playage automatique 2. Écran large automatique 3. Playage de haute qualité 4. Cliquez pour pousser le film suivant 5. Téléchargez les miniatures
// @description:he     1. הפעלה אוטומטית 2. מסך רחב אוטומטי 3. השמעה באיכות גבוהה 4. לחץ כדי לדחוף את הסרט הבא 5. הורד תמונות ממוזערות
// @description:hr     1. Automatska reprodukcija 2. Automatsko široko zaslon 3. visokokvalitetna reprodukcija 4. Kliknite da biste gurnuli sljedeći film 5. Preuzmite sličice
// @description:hu     1. Automatikus lejátszás 2.
// @description:id     1. Putar Balik Otomatis 2. Otomatis Widescreen 3. Pemutaran Berkualitas Tinggi 4. Klik untuk mendorong film berikutnya 5. Unduh Thumbnails
// @description:it     1. Riproduzione automatica 2. Widescreen automatico 3. Riproduzione di alta qualità 4. Fare clic per spingere il film successivo 5. Scarica le miniature
// @description:ja     1。自動再生2。自動ワイドスクリーン3。高品質の再生4。クリックして次の映画を押してください。
// @description:ka     1. ავტომატური დაკვრა 2. ავტომატური ფართო ეკრანი 3. მაღალი ხარისხის აღწარმოება 4. დააჭირეთ ღილაკს შემდეგი ფილმი 5. ჩამოტვირთეთ მინიატურები
// @description:ko     1. 자동 재생 2. 자동 와이드 스크린 3. 고품질 재생 4. 다음 영화를 푸시하려면 클릭하십시오. 다운로드 썸네일 다운로드
// @description:nb     1.
// @description:nl     1. Automatisch afspelen 2. Automatisch breedbeeld 3. Hoogwaardige afspeel 4. Klik om de volgende film te pushen 5. Download miniatuurs
// @description:pl     1. Automatyczne odtwarzanie 2. Automatyczne panoramiczne 3. Wysokiej jakości odtwarzanie 4. Kliknij, aby popchnąć następny film 5. Pobierz miniatury
// @description:pt-BR  1. Reprodução automática 2. Widescreen automático 3. Reprodução de alta qualidade 4. Clique para empurrar o próximo filme 5. Baixe miniaturas
// @description        1. Automatic playback 2. Automatic widescreen 3. High-quality playback 4. Click to push the next movie 5. Download thumbnails
// @description:ro     1. Redarea automată a 1. automat pe ecran lat. 3. Redarea de înaltă calitate 4. Faceți clic pentru a împinge următorul film 5. Descărcați Miniaturi
// @description:ru     1. Автоматическое воспроизведение 2. Автоматический широкоэкранный 3. Высококачественный воспроизведение 4. Нажмите, чтобы протолкнуть следующий фильм 5. Скачать миниатюры
// @description:sk     1.
// @description:sr     1. Аутоматска репродукција 2. Аутоматски широки екран 3. Клинирајте репродукцију квалитета 4. Кликните да притиснете следећи филм 5. Преузмите сличице
// @description:sv     1. Automatisk uppspelning 2. Automatisk widescreen 3. Högkvalitativ uppspelning 4. Klicka för att trycka på nästa film 5. Ladda ner miniatyrbilder
// @description:th     1. การเล่นอัตโนมัติ 2. ไวด์สกรีนอัตโนมัติ 3. การเล่นคุณภาพสูง 4. คลิกเพื่อส่งภาพยนตร์เรื่องต่อไป 5. ดาวน์โหลดภาพขนาดย่อ
// @description:tr     1. Otomatik Oynatma 2. Otomatik Geniş Ekran 3. Yüksek kaliteli oynatma 4. Bir sonraki filmi itmek için tıklayın 5.
// @description:ug     1. ئاپتوماتىك قويۇش 2. ئاپتوماتىك كەڭ ئېكران 3. يۇقىرى سۈپەتلىك قويۇش 4. كېيىنكى فىلىمنى ئىتتىرىش ئۈچۈن چېكىڭ. كىچىك كۆرۈنۈش
// @description:uk     1. Автоматичне відтворення 2. Автоматичний широкоекранний 3. Високоякісне відтворення 4. Клацніть, щоб натиснути на наступний фільм 5. Завантажте мініатрики
// @description:vi     1. Phát lại tự động 2. Tự động màn hình rộng 3. Phát lại chất lượng cao 4. Nhấp để đẩy bộ phim tiếp theo 5. Tải xuống hình thu nhỏ
// @description:zh     1.自动播放 2.自动宽屏 3.高画质播放 4.点击推送下片 5.下载缩略图
// @description:zh-CN  1.自动播放 2.自动宽屏 3.高画质播放 4.点击推送下片 5.下载缩略图
// @description:zh-HK  1.自動播放 2.自動寬屏 3.高畫質播放 4.點擊推送下片 5.下載縮略圖
// @description:zh-SG  1.自动播放 2.自动宽屏 3.高画质播放 4.点击推送下片 5.下载缩略图
// @description:zh-TW  1.自動播放 2.自動寬屏 3.高畫質播放 4.點擊推送下片 5.下載縮略圖
// @grant              GM_xmlhttpRequest
// @grant              GM_download
// @match              *://*.xvideos.com/video*
// @require            https://update.greasyfork.org/scripts/498897/1404834/Toastnew.js
// @author             cocang,iuroc,人民的勤务员 <china.qinwuyuan@gmail.com>
// @namespace          https://github.com/ChinaGodMan/UserScripts
// @supportURL         https://github.com/ChinaGodMan/UserScripts/issues
// @homepageURL        https://github.com/ChinaGodMan/UserScripts
// @homepage           https://github.com/ChinaGodMan/UserScripts
// @license            MIT
// @icon               data:image/png;base64,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
// @compatible         chrome
// @compatible         firefox
// @compatible         edge
// @compatible         opera
// @compatible         safari
// @compatible         kiwi
// @version            2025.03.05.0127
// @created            2025-03-05 01:27:35
// @modified           2025-03-05 01:27:35
// ==/UserScript==

//!人民的勤务员修改自以下脚本  感谢 @cocang @iuroc
/* [xvideos 推送下载](https://greasyfork.org/zh-CN/scripts/438212)
  [XVIDEOS M3U8 视频地址获取](https://greasyfork.org/zh-CN/scripts/454287) */
(function () {
    'use strict'
    const userLang = (navigator.languages && navigator.languages[0]) || navigator.language || 'en'
    const translations = {
        'en': {
            downloading: 'Thumbnail is downloading (❛◡❛✿)',
            downloadfailed: 'Thumbnail not found (๑•́ ₃ •̀๑)',
            linkTip: 'M3U8 video link (click to download):',
            previewTip: 'Preview'
        },
        'zh-CN,zh,zh-SG': {
            downloading: '缩略图正在下载  (❛◡❛✿)',
            downloadfailed: '未发现缩略图  (๑•́ ₃ •̀๑)',
            linkTip: 'M3U8视频地址 (点击下载)：',
            previewTip: '预览图'
        },
        'zh-TW,zh-HK,zh-MO': {
            downloading: '縮略圖正在下載  (❛◡❛✿)',
            downloadfailed: '未發現縮略圖  (๑•́ ₃ •̀๑)',
            linkTip: 'M3U8視頻地址 (點擊下載)：',
            previewTip: '預覽圖'
        },
        'ja': {
            downloading: 'サムネイルをダウンロード中 (❛◡❛✿)',
            downloadfailed: 'サムネイルが見つかりませんでした (๑•́ ₃ •̀๑)',
            linkTip: 'M3U8ビデオリンク (クリックしてダウンロード):',
            previewTip: 'プレビュー'
        },
        'vi': {
            downloading: 'Đang tải xuống hình thu nhỏ (❛◡❛✿)',
            downloadfailed: 'Không tìm thấy hình thu nhỏ (๑•́ ₃ •̀๑)',
            linkTip: 'Liên kết video M3U8 (nhấp để tải xuống):',
            previewTip: 'Hình xem trước'
        },
        'fr': {
            downloading: 'Téléchargement de la miniature en cours (❛◡❛✿)',
            downloadfailed: 'Miniature introuvable (๑•́ ₃ •̀๑)',
            linkTip: 'Lien vidéo M3U8 (cliquez pour télécharger):',
            previewTip: 'Aperçu'
        },
        'es': {
            downloading: 'Descargando miniatura (❛◡❛✿)',
            downloadfailed: 'Miniatura no encontrada (๑•́ ₃ •̀๑)',
            linkTip: 'Enlace de video M3U8 (clic para descargar):',
            previewTip: 'Vista previa'
        }
    }
    const getTranslations = (lang) => {
        for (const key in translations) {
            if (key === lang || key.split(',').includes(lang)) {
                return translations[key]
            }
        }
        return translations['en']
    }
    const translate = new Proxy(
        function (key) {
            const lang = userLang
            const strings = getTranslations(lang)
            return strings[key] || translations['en'][key]
        },
        {
            get(target, prop) {
                const lang = userLang
                const strings = getTranslations(lang)
                return strings[prop] || translations['en'][prop]
            }
        }
    )
    //greasyfork.org/scripts/438212
    html5player.player_init && (html5player.toggleExpand())
    const download_btn = document.querySelector('button.dl.tab-button')
    download_btn.insertAdjacentHTML('afterend', '<button class="dl" id="thumbbig"><span class="icon-f icf-image"></span><span>' + translate('previewTip') + '</span></button>')
    document.getElementById('thumbbig').onclick = () => {
        if (html5player.thumb_slide_big) {
            let thumb_url = html5player.thumb_slide_big
            let video_tittle = document.querySelector('p.video-title').innerText
            GM_download(thumb_url, video_tittle + '.jpg')
            Toast(translate('downloading'), 3000, 'rgb(22, 199, 99)', '#ffffff', 'top')
        } else {
            Toast(translate('downloadfailed'), 3000, 'rgb(22, 199, 99)', '#ffffff', 'top')
        }
    }


    Object.defineProperties(html5player.hlsobj, {
        autoLevelEnabled: { value: false, writable: false },
        firstLevel: { value: 4, writable: false }
    })

    let play_val = false
    Object.defineProperty(html5player, 'canPlay', {
        get: () => play_val,
        set: (val) => {
            val && (html5player.playClicked = true)
            val && (html5player.play())
            play_val = val
        }
    })
    var url_hls = html5player.url_hls
    $.get(url_hls, function (data) {
        data = data.split('#EXT-X-STREAM-INF')
        data.splice(0, 1)
        var html = ''
        //排序,从高到低
        data.sort((a, b) => {
            let resolutionA = parseInt(/RESOLUTION=(\d+)x/.exec(a)?.[1] || 0)
            let resolutionB = parseInt(/RESOLUTION=(\d+)x/.exec(b)?.[1] || 0)
            return resolutionB - resolutionA
        })
        data.forEach(item => {
            var name = /NAME="(.*?)"/.exec(item)[1]
            var url = (html5player.url_hls + '#').replace(/hls.m3u8.*#/, /\n(hls-.*)\n?/.exec(item)[1])
            html += `<a style="margin-right: 20px; padding: 5px 10px; border: 1px solid;" href="${url}" class="video-tab" data-url="${url}">${name}</a>`
        })
        $('#video-tabs').append(`<div style="margin-bottom: 10px; margin-top: 10px; font-size: 20px;">${translate('linkTip')}<br>${html}</div>`)
        $('.video-tab').on('click', function (e) {
            // 复制
            e.preventDefault()
            var urlToCopy = $(this).data('url')
            var tempInput = document.createElement('textarea')
            document.body.appendChild(tempInput)
            tempInput.value = urlToCopy
            tempInput.select()
            document.execCommand('copy')
            document.body.removeChild(tempInput)
            // 跳转下载
            let a = document.createElement('a')
            a.href = 'https://tools.thatwind.com/tool/m3u8downloader#m3u8=' + urlToCopy
            a.target = '_blank'
            a.click()
            document.body.removeChild(a)

        })
    })

})()
